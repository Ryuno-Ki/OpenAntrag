var Picker=function(n){if(this.settings={parent:document.body,orientation:"right",x:"auto",y:"auto",arrow_size:20},n instanceof HTMLElement)this.settings.parent=n;else for(var t in n)this.settings[t]=n[t];this.sliders={picker_selector:{down:!1},picker_hue:{down:!1,vertical:!0},picker_opacity:{down:!1,vertical:!0}};this.colour=this.color={hue:0,saturation:1,value:1,alpha:1,hsl:function(){var i=this.hue,n=(2-this.saturation)*this.value,t=this.saturation*this.value;return t/=n<=1?n:2-n,n/=2,t*=100,n*=100,{h:i,s:t,l:n,toString:function(){return"hsl("+this.h+", "+this.s+"%, "+this.l+"%)"}}},hsla:function(){var n=this.hsl();return n.a=this.alpha,n.toString=function(){return"hsla("+this.h+", "+this.s+"%, "+this.l+"%, "+this.a+")"},n},rgb:function(){var o,s,h,r=this.hue,u=this.saturation,n=this.value;r/=60;var i=Math.floor(r),c=r-i,t=n*(1-u),f=n*(1-u*c),e=n*(1-u*(1-c));return o=[n,f,t,t,e,n][i],s=[e,n,n,f,t,t][i],h=[t,t,e,n,n,f][i],{r:Math.floor(o*255),g:Math.floor(s*255),b:Math.floor(h*255),toString:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"}}},rgba:function(){var n=this.rgb();return n.a=this.alpha,n.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},n},hex:function(){function t(n){var t=n.toString(16);return t.length==1?"0"+t:t}var n=this.rgb();return{r:t(n.r),g:t(n.g),b:t(n.b),toString:function(){return"#"+this.r+this.g+this.b}}}};this.on_done=null;this.on_change=null};Picker.prototype.css={wrapper:{selector:"#picker_wrapper",background:"#f2f2f2",position:"absolute",whiteSpace:"nowrap",padding:"10px",cursor:"default",fontFamily:"sans-serif",fontWeight:"100",display:"inline-block",boxShadow:"0 0 10px 1px rgba(0,0,0,0.4)",overflow:"visible",textAlign:"left",fontSize:"16px"},arrow:{selector:"#picker_arrow",height:"0",width:"0",borderLeft:"20px solid transparent",borderRight:"20px solid transparent",borderBottom:"20px solid #f2f2f2",position:"absolute",top:"-20px",left:"0"},colour_picker:{selector:"#picker_selector",width:"180px",height:"150px",position:"relative",background:"hsl(0, 100%, 50%)",display:"inline-block",border:"1px solid #ccc"},saturation_overlay:{selector:"#picker_saturation",width:"180px",height:"150px",position:"absolute",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAACWCAYAAAB3qaIPAAADB0lEQVR4Ae3SQQrCMABE0cb7n9nYIgUXIW7ExecJUkmlOjNvzDmfx3HM831fPz/fZ/d1dW91tvv+7t4vn/Wv3/Gf335WPazOdrvs7n191hhjPk7IXhrINAB0ZkpBrgaA5iDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUA0Cn5hQGaAZSDQCdmlMYoBlINQB0ak5hgGYg1QDQqTmFAZqBVANAp+YUBmgGUg0AnZpTGKAZSDUAdGpOYYBmINUA0Kk5hQGagVQDQKfmFAZoBlINAJ2aUxigGUg1AHRqTmGAZiDVANCpOYUBmoFUAy+AUbcs6wwU4wAAAABJRU5ErkJggg==)"},value_overlay:{selector:"#picker_value",width:"180px",height:"150px",position:"absolute",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAACWCAYAAAB3qaIPAAADFUlEQVR4Ae3WgQ3AMAzDsHbY/ycPa95QmQ9kC0bWchIIJbAPyxPigXJ5Au/hH6mdBBIJjNAWOlEliEmA0DxIJeDlSNUJxkJzIJUAoVN1giE0B1IJ+KFTdYKx0BxIJUDoVJ1gvBwcSCVgoVN1giE0B1IJeDlSdYKx0BxIJUDoVJ1gCM2BVAJ+6FSdYCw0B1IJEDpVJxgvBwdSCVjoVJ1gCM2BVAKETtUJxg/NgVQCFjpVJxhCcyCVgJcjVScYC82BVAKETtUJxsvBgVQCFjpVJxhCcyCVAKFTdYLxQ3MglYCFTtUJhtAcSCXg5UjVCcZCcyCVAKFTdYIhNAdSCfihU3WCsdAcSCVA6FSdYLwcHEglYKFTdYIhNAdSCXg5UnWCsdAcSCVA6FSdYAjNgVQCfuhUnWAsNAdSCRA6VScYLwcHUglY6FSdYAjNgVQChE7VCcYPzYFUAhY6VScYQnMglYCXI1UnGAvNgVQChE7VCcbLwYFUAhY6VScYQnMglQChU3WC8UNzIJWAhU7VCYbQHEgl4OVI1QnGQnMglQChU3WCITQHUgn4oVN1grHQHEglQOhUnWC8HBxIJWChU3WCITQHUgkQOlUnGD80B1IJWOhUnWAIzYFUAl6OVJ1gLDQHUgkQOlUnGC8HB1IJWOhUnWAIzYFUAoRO1QnGD82BVAIWOlUnGEJzIJWAlyNVJxgLzYFUAoRO1QmG0BxIJeCHTtUJxkJzIJUAoVN1gvFycCCVgIVO1QmG0BxIJeDlSNUJxkJzIJUAoVN1giE0B1IJ+KFTdYKx0BxIJUDoVJ1gvBwcSCVgoVN1giE0B1IJEDpVJxg/NAdSCVjoVJ1gCM2BVAJejlSdYCw0B1IJEDpVJxgvBwdSCVjoVJ1gCM2BVAKETtUJxg/NgVQCFjpVJxhCcyCVgJcjVScYC82BVAKETtUJhtAcSCXgh07VCcZCcyCVAKFTdYLxcnAglYCFTtUJhtAcSCXg5UjVCcZCcyCVAKFTdYIhNAdSCfihU3WCsdAcSCVA6FSdYLwcHEglsA/NlyICc3UCP/PSBEmeyvh+AAAAAElFTkSuQmCC)"},hue_slider:{selector:"#picker_hue",width:"16px",height:"150px",position:"relative",display:"inline-block",marginLeft:"10px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAACWCAYAAADe8ajeAAABUklEQVRoBe2ZwQ4CMQhEIXJR//9T1biXyp1DJT4SzOKxRcLM0AJdXWJLwJ+J3EF3IhUOb+0jxDkcyD9qXpGHJ1R58nDyMMtA/6OnS95oGdVDFurQnlnWN/bjcEPQF9vD4RckbUzssTHIbtsr+4+NPa9yf8j9I8Tvw/6Q8QhxDvGj1x6yCl3o5bq5j5LbJmzP7hP9OExqEMwLOGSHUVe5fx72h9w/Qvws94eMR4hziB+9/pBxDmGHKgc70ausg30iEGHbJX+3wR2yLWdFhAM5dCu5BRdlVM5RFqwrEntECTTnFipEmdsmp0Gw9jLKfgFXd8fWZbgTEevvEO43xeCOuIDD/pDxCPE8xFXuDxnncByGGpFd+IMLdlTOihrs1ed5ttDDc4+/wbLtoTuEv9DYGSHjorCTWYXK/SHjHI7DcGMmFwouhxElqUEwP6Eoui5sof8A9nlhGxrI9UUAAAAASUVORK5CYII=)",border:"1px solid #ccc"},opacity_slider:{selector:"#picker_opacity",width:"16px",height:"150px",position:"relative",display:"none",marginLeft:"10px",background:"#f00",border:"1px solid #ccc"},opacity_slider_overlay:{selector:"#picker_opacity_fade",width:"16px",height:"150px",display:"inline-block",position:"absolute",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAACWCAYAAADXGgikAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEBklEQVRo3q1ay6HUQAyz8+ZKIZzTAn3QB4VQB4Vs6qAMcdnAZCLJDvAu7C/J2JZl2SbiH//y9XptEYGIyOU7RETu+36+/n3N/KMREdt8wfR6Izecb4KIyDFdlPMX7LTs/SBPSnKiUJ+N6cnsByCnwmzGfIIUtsb7NyCm5Ji+TOE8a1oC+LR6dr7qOA4WiWRhzOX4QT5fT3uLQhbHjyXswXwQBR4uETrDyFDHbnxzKDMB6zGJCWBhjAVUYVCYDIkUaeLzP1A+jmMzjjvTeUXjDYlVGOX3w0AXDbMoDlhOQEVoTed05NExAQ0/RIdQIIAT1QkqE26ITQCf3RHffMCSjZoQDW6MlQ8+TJzX9zduZCeQ9jLOHAYwsVyEpYpRVmY3mr/P9bVyYkUol2zMZjmjp5z5gD5p33eJAcaJigMoBhQnuvIOVRc6hEL9MIqnsahQEyoOhArlMNB1Ja/0wWYKClY++NLgg+gwEtRTHEodobBaeaP/lVC6SiVVMkVhRiqBoRCXTmApgRFP8mM0dKGq2hc+kJS277ut0KtCUeShkqtd2qT4GELiZcEPti4owZEMZMPJWJInsmfCw3bngkQnacOgFGe/8NVx4XEccJSnkKhQaBuOyg+SD1J0JQqByZxoK7BLtlHEutSNQ3BAGL14A9KH6gUa72Mcx5GCNLH0CzSx5qYLBtZQ7fHpxFRQrUxhhJLN7sUiURUSKnU3Qxhp/LGp2pgPkivVEKb7hwTwTdTDWR+w6Yal9c3goCWyUDSkpcgKw4PJkKgycCP9wvyvHURV0t/KPBiVEqo640GF2li/QEG08EEyTswH1RhOI3U54BKlihNL7TTMILKTXBhmglOVtmCVCcXR0RVZ7SlOAvjumsxJH1Az3TRPlfoLKkdB5VmZ4wbT2UBmVIPprDJzLW0VH9zgrhQKuppZlbatMZCLkw8UlZ/9guKC7CCxzM5hMIAGT/zuG13GKQFWFpaWOcOM/lsspfQBTCNGFYpzVLobJIAf7pjTPFHOVDvduwx1NUuruDI7kyyl3qGKa2dNdBuJKhS6rnZjk6xK5ubf+kDO1mZ9QLXye35QjkSr8WeKzJRD2apCJ+udwwzpU62RHBLdlD+dWmeDJygtpZBYLTDL1tcl1WVgmQBe/2OeiILWW41nmIZLNuTdjWd0mq54aEY4jdR5OpQTO51re8fSmh/YbHzrAxkN1y+EUCqPFxSWI7ubrnDDOCUwWKmXPqiOmx2p+2g1Us3SWANOt18J4KeZI618cPuNS6bWfyUYZobmeDHCLOuyGAtt3TVRq9SpdG6lspsrpwkdlboqpcuV+tkvyE3PtF+IipXDVGQbxq1oOl2pt7Wxsl/uF8L1yswHGX4h5fYL+Qv+btsS2cFCRgAAAABJRU5ErkJggg==)"},colour_selector:{selector:".picker_selector",width:"10px",height:"10px",position:"absolute",display:"inline-block",borderRadius:"20px",cursor:"pointer",border:"2px solid #fff",boxShadow:"0 0 3px 1px #67b9ff",background:"#f00",left:"173px",top:"-7px"},slider_bar:{selector:".picker_slider_bar",width:"100%",height:"10px",position:"absolute",top:"-7px",borderRadius:"2px",cursor:"pointer",border:"2px solid #fff",boxShadow:"0 0 3px 1px #67b9ff",marginLeft:"-2px",background:"#f00",fontSize:"16px"},sample:{selector:"#picker_sample",width:"140px",height:"24px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIUlEQVR42mM4c+bMf3yYEGAYNWBYGEBIASELRg0YFgYAAMoUr64OfmpAAAAAAElFTkSuQmCC)",display:"inline-block",position:"relative",marginTop:"5px",border:"1px solid #aaa"},sample_colour:{selector:"#picker_sample_colour",width:"100%",height:"100%",background:"rgba(255,0,0,0.4)",position:"absolute"},done_button:{fontSize:"14px",selector:"#picker_done",width:"60px",height:"24px",lineHeight:"24px",background:"#e2e2e2",display:"inline-block",border:"1px solid #ccc",marginLeft:"10px",textAlign:"center",color:"#333",position:"absolute",right:"12px",bottom:"13px",cursor:"pointer"}};Picker.prototype.apply_style=function(){var t,i,r,u,n,f;for(n in this.css)if(t=this.css[n],i=document.querySelectorAll(t.selector),i.length)for(r=i.length;r--;){u=i[r];for(n in t)n!="selector"&&(f=t[n],u.style[n]=f)}};Picker.prototype.show=function(){var i=document.getElementById("picker_wrapper"),t,r,n;if(i){i.style.display="inline-block";return}if(t="",t+='<div id="picker_wrapper">',t+='   <div id="picker_arrow"><\/div>',t+='   <div id="picker_selector">',t+='       <div id="picker_saturation"><\/div>',t+='       <div id="picker_value"><\/div>',t+='       <div class="picker_selector"><\/div>',t+="   <\/div>",t+='   <div id="picker_hue" class="picker_slider">',t+='       <div class="picker_slider_bar"><\/div>',t+="   <\/div>",t+='   <div id="picker_opacity" class="picker_slider">',t+='       <div id="picker_opacity_fade"><\/div>',t+='       <div class="picker_slider_bar"><\/div>',t+="   <\/div>",t+="   <br>",t+='   <div id="picker_sample">',t+='   <div id="picker_sample_colour"><\/div>',t+="   <\/div>",t+='   <div id="picker_done">OK<\/div>',t+="<\/div>",r=this.settings.parent,r.style.position!="absolute"&&(r.style.position="relative"),r.innerHTML+=t,this.apply_style(),i=document.getElementById("picker_wrapper"),n=document.getElementById("picker_arrow"),this.settings.x==="auto")switch(this.settings.orientation){case"left":i.style.left=-i.offsetWidth-this.settings.arrow_size-4+"px";break;case"top":case"bottom":i.style.left=r.offsetWidth/2-this.settings.arrow_size+"px";break;case"center":case"centre":i.style.left=-i.offsetWidth/2+r.offsetWidth/2+"px";break;default:i.style.left=r.offsetWidth+this.settings.arrow_size+4+"px"}else i.style.left=parseInt(this.settings.x)+"px";if(this.settings.y==="auto")switch(this.settings.orientation){case"top":i.style.top=-i.offsetHeight-this.settings.arrow_size-4+"px";break;case"bottom":i.style.top=r.offsetHeight+this.settings.arrow_size+4+"px";break;case"center":case"centre":i.style.top=-r.offsetHeight/2+-i.offsetHeight/2+"px";break;default:i.style.top=r.offsetHeight/2-this.settings.arrow_size+"px"}else i.style.top=parseInt(this.settings.y)+"px";switch(this.settings.orientation){case"left":n.style.borderLeft=this.settings.arrow_size+"px solid"+this.css.wrapper.background;n.style.borderRight="none";n.style.borderTop=this.settings.arrow_size+"px solid transparent";n.style.borderBottom=this.settings.arrow_size+"px solid transparent";n.style.top="0";n.style.right=-this.settings.arrow_size+"px";n.style.left="";break;case"top":n.style.borderLeft=this.settings.arrow_size+"px solid transparent";n.style.borderRight=this.settings.arrow_size+"px solid transparent";n.style.borderTop=this.settings.arrow_size+"px solid"+this.css.wrapper.background;n.style.borderBottom="none";n.style.bottom=-this.settings.arrow_size+"px";n.style.top="";n.style.left="0";break;case"bottom":n.style.borderLeft=this.settings.arrow_size+"px solid transparent";n.style.borderRight=this.settings.arrow_size+"px solid transparent";n.style.borderTop="none";n.style.borderBottom=this.settings.arrow_size+"px solid"+this.css.wrapper.background;n.style.top=-this.settings.arrow_size+"px";n.style.left="0";break;case"center":case"centre":n.style.borderLeft="none";n.style.borderRight="none";n.style.borderTop="none";n.style.borderBottom="none";break;default:n.style.borderLeft="none";n.style.borderRight=this.settings.arrow_size+"px solid"+this.css.wrapper.background;n.style.borderTop=this.settings.arrow_size+"px solid transparent";n.style.borderBottom=this.settings.arrow_size+"px solid transparent";n.style.top="0";n.style.left=-this.settings.arrow_size+"px"}this.bind_events();this.update_sample()};Picker.prototype.hide=function(){var n=document.getElementById("picker_wrapper");n&&(n.style.display="none")};Picker.prototype.update_picker_selector=function(n,t,i){this.colour.saturation=t/(n.offsetWidth-2);this.colour.value=1-i/(n.offsetHeight-2);this.update_opacity_slider();this.update_sample();this.update_picker_slider()};Picker.prototype.update_picker_hue=function(n,t,i){this.colour.hue=(1-i/(n.offsetHeight-2))*360;this.update_selector_hue();this.update_sample();this.update_hue_slider()};Picker.prototype.update_picker_opacity=function(n,t,i){this.colour.alpha=1-i/(n.offsetHeight-2);this.update_sample();this.update_opacity_slider()};Picker.prototype.update_sample=function(){var n=document.getElementById("picker_sample_colour");if(n.style.background=this.colour.hsla().toString(),this.update_opacity_hue(),this.on_change)this.on_change(this.colour)};Picker.prototype.update_selector_hue=function(){var n=document.getElementById("picker_selector");n.style.background="hsl("+this.colour.hue+", 100%, 50%)";this.update_picker_slider();this.update_opacity_slider()};Picker.prototype.update_opacity_hue=function(){var n=document.getElementById("picker_opacity");n.style.background=this.colour.hsl().toString()};Picker.prototype.update_picker_slider=function(){var n=document.querySelector("#picker_selector .picker_selector");n.style.background=this.colour.hsl().toString()};Picker.prototype.update_hue_slider=function(){var n=document.querySelector("#picker_hue .picker_slider_bar");n.style.background="hsl("+this.colour.hue+", 100%, 50%)"};Picker.prototype.update_opacity_slider=function(){var n=document.querySelector("#picker_opacity .picker_slider_bar");n.style.background=this.colour.hsla().toString()};Picker.prototype.mouse_move=function(n,t,i,r){var o=t.getBoundingClientRect(),f=n.clientX-o.left,e=n.clientY-o.top,s,u;if(r||i.sliders[t.id]&&i.sliders[t.id].down){if(s=i.sliders[t.id],u=t.querySelectorAll(".picker_selector")[0]||t.querySelectorAll(".picker_slider_bar")[0],!u)return;s.vertical||(f=Math.min(Math.max(f-u.offsetWidth/2,-(u.offsetWidth/2)),t.offsetWidth-u.offsetWidth/2-2),u.style.left=f+"px");e=Math.min(Math.max(e-u.offsetHeight/2,-(u.offsetHeight/2)),t.offsetHeight-u.offsetHeight/2-2);u.style.top=e+"px";i["update_"+t.id]&&i["update_"+t.id](t,f+u.offsetWidth/2,e+u.offsetHeight/2)}};Picker.prototype.bind_events=function(){var t=document.getElementById("picker_wrapper"),f=document.getElementById("picker_done"),i=document.getElementById("picker_selector"),r=document.getElementById("picker_hue"),u=document.getElementById("picker_opacity"),e=document.querySelector("#picker_selector .picker_selector"),o=document.querySelector("#picker_hue .picker_slider_bar"),s=document.querySelector("#picker_opacity .picker_slider_bar"),n=this;i.onmousemove=r.onmousemove=u.onmousemove=function(t){n.mouse_move(t,this,n);t.preventDefault()};i.onmousedown=r.onmousedown=u.onmousedown=function(t){n.sliders[this.id].down=!0;n.mouse_move(t,this,n,!0);t.preventDefault()};e.onmousedown=o.onmousedown=s.onmousedown=function(){n.sliders[this.parentNode.id].down=!0};t.onclick=t.onmousedown=function(n){return n.stopPropagation(),n.preventDefault(),!1};document.getElementsByTagName("html")[0].onmouseup=function(){for(var t in n.sliders)n.sliders[t].down=!1};document.getElementsByTagName("html")[0].onclick=function(t){t.target&&t.target!=n.settings.parent&&n.hide()};f.onclick=function(){n.done()}};Picker.prototype.done=function(){if(this.hide(),this.on_done)this.on_done(this.colour)};
/*
//# sourceMappingURL=picker.min.js.map
*/